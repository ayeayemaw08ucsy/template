package com.bbi.fam.utils;

import java.awt.AlphaComposite;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.FileVisitOption;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardCopyOption;
import java.text.SimpleDateFormat;
import java.util.Base64;
import java.util.Comparator;
import java.util.Base64.Decoder;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.Properties;
import java.util.Random;

import javax.imageio.ImageIO;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageConfig;
import com.google.zxing.client.j2se.MatrixToImageWriter;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.qrcode.QRCodeWriter;
import com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;

@Configuration
@PropertySource("classpath:/application.properties")
public class ImageWriter {
	
	@Value("${img.path}")
	public static String path;
	
	static Properties properties = new Properties();
	static String propertiesFileName = "application.properties";
	static String pic_folder = "/Picture";
	static String qr_folder = "/QR";
	
	private static final String ext = ".png";
    private static final int WIDTH = 300;
    private static final int HEIGHT = 300;
	

	public static void writeRequestAndResponse(String prodRefId, String imageSrc, String pic_path, String pic_name) {
		
		//String img = "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";
		Decoder decoder;
		byte[] fixed_asset_img = null ;
		
		InputStream inputStream = ImageWriter.class.getClassLoader().getResourceAsStream(propertiesFileName);
		try {
			properties.load(inputStream);
		} catch (IOException e) {
			e.printStackTrace();
		}

		String imgBase = properties.getProperty("img.path");
		/*File theDir = new File(imgBase + prodRefId + pic_folder);*/
		/*String path = imgBase + prodRefId + pic_folder + "/" + "fixed-asset-1.jpeg";*/
		File theDir = new File(pic_path);
		decoder = Base64.getDecoder();
		fixed_asset_img = decoder.decode(imageSrc);
		System.out.println("creating directory: " + theDir.getName());
		System.out.println("imageSrc : " + imageSrc);
		
		if (!theDir.exists()) {			
			boolean result = false;
			try {
				theDir.mkdirs();
				result = true;				
				drawPicture(fixed_asset_img, pic_name);
			    
			} catch (SecurityException se) {
				System.out.println(se.getMessage());
			}
			if (result) {
				System.out.println("Folder created");
			}
		} else if (theDir.exists()) {

			System.out.println("Folder exist");
			System.out.println("fixed_asset_img " + fixed_asset_img);
			System.out.println("pic_name " + pic_name);
			drawPicture(fixed_asset_img, pic_name);
			
		}

	}

	public static void drawPicture(byte[] array, String pic_name) { 
		
	    try { 	    	
	        FileOutputStream stream = new FileOutputStream(pic_name); 
			stream.write(array);
			
	    } catch (FileNotFoundException e) { 
	        e.printStackTrace(); 
	        
	    } catch (IOException e) {
			e.printStackTrace();
		} 
	} 
	
	public static void generate(String prodRef) {
        // Create new configuration that specifies the error correction
        Map<EncodeHintType, ErrorCorrectionLevel> hints = new HashMap<>();
        hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);
        QRCodeWriter writer = new QRCodeWriter();
        BitMatrix bitMatrix = null;
        ByteArrayOutputStream os = new ByteArrayOutputStream();

        try {
            // init directory
        	String folderDir = path + "/" + prodRef + "/QR/"; 
            cleanDirectory(folderDir);
            initDirectory(folderDir);
            // Create a qr code with the url as content and a size of WxH px
            bitMatrix = writer.encode(prodRef, BarcodeFormat.QR_CODE, WIDTH, HEIGHT, hints);

            // Load QR image
            BufferedImage qrImage = MatrixToImageWriter.toBufferedImage(bitMatrix, getMatrixConfig());

            // Load logo image
            Resource resource = new ClassPathResource("/images/logo.png");
            BufferedImage overly = getOverly(resource.getFile().getAbsolutePath());

            // Calculate the delta height and width between QR code and logo
            int deltaHeight = qrImage.getHeight() - overly.getHeight();
            int deltaWidth = qrImage.getWidth() - overly.getWidth();

            // Initialize combined image
            BufferedImage combined = new BufferedImage(qrImage.getHeight(), qrImage.getWidth(), BufferedImage.TYPE_INT_ARGB);
            Graphics2D g = (Graphics2D) combined.getGraphics();

            // Write QR code to new image at position 0/0
            g.drawImage(qrImage, 0, 0, null);
            g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1f));

            // Write logo into combine image at position (deltaWidth / 2) and
            // (deltaHeight / 2). Background: Left/Right and Top/Bottom must be
            // the same space for the logo to be centered
            g.drawImage(overly, (int) Math.round(deltaWidth / 2), (int) Math.round(deltaHeight / 2), null);

            // Write combined image as PNG to OutputStream
            ImageIO.write(combined, "png", os);
            // Store Image
            Files.copy( new ByteArrayInputStream(os.toByteArray()), Paths.get(folderDir + generateRandoTitle(new Random(), 9) +ext), StandardCopyOption.REPLACE_EXISTING);

        } catch (WriterException e) {
            e.printStackTrace();
            //LOG.error("WriterException occured", e);
        } catch (IOException e) {
            e.printStackTrace();
            //LOG.error("IOException occured", e);
        }
    }

    private static BufferedImage getOverly(String LOGO) throws IOException {
        File url = new File(LOGO);
        return ImageIO.read(url);
    }

    private static void initDirectory(String DIR) throws IOException {
        Files.createDirectories(Paths.get(DIR));
    }

    private static void cleanDirectory(String DIR) {
        try {
            Files.walk(Paths.get(DIR), FileVisitOption.FOLLOW_LINKS)
                    .sorted(Comparator.reverseOrder())
                    .map(Path::toFile)
                    .forEach(File::delete);
        } catch (IOException e) {
            // Directory does not exist, Do nothing
        }
    }

    private static MatrixToImageConfig getMatrixConfig() {
        // ARGB Colors
        // Check Colors ENUM
        return new MatrixToImageConfig(QRCodeGenerator.Colors.BLACK.getArgb(), QRCodeGenerator.Colors.WHITE.getArgb());
    }

    private static String generateRandoTitle(Random random, int length) {
        return random.ints(48, 122)
                .filter(i -> (i < 57 || i > 65) && (i < 90 || i > 97))
                .mapToObj(i -> (char) i)
                .limit(length)
                .collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)
                .toString();
    }

    public enum Colors {

        BLUE(0xFF40BAD0),
        RED(0xFFE91C43),
        PURPLE(0xFF8A4F9E),
        ORANGE(0xFFF4B13D),
        WHITE(0xFFFFFFFF),
        BLACK(0xFF000000);

        private final int argb;

        Colors(final int argb){
            this.argb = argb;
        }

        public int getArgb(){
            return argb;
        }
    }

//	public static void main(String[] args) {
//		writeRequestAndResponse("1236", "", "", "");
//	}

}
